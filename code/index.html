<!DOCTYPE HTML>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Vectors en cirkels</title>
  <link rel="stylesheet" href="reset.css" />
  <link rel="stylesheet" href="style.css" />
  
  <script src="jquery.js"></script>
  <script src="vector.js"></script>
  <script src="javascript.js"></script>
  <script>
    var wereld, interval = null;
    
    function loop(voorwaartsch){
      
      if(wereld.stap(voorwaartsch)){
          clearInterval(interval);
          interval = null;
      }
      
      wereld.teken();
    }
    
    $(document).ready(function(){
      var ctx = $('#c')[0].getContext('2d'),
          $loopBtn = $('#loop'),
          $stapBtn = $('#stap'),
          $nieuwBtn = $('#add');

      wereld = new Wereld(800, 600, ctx);
      
      // Grote cirkel
      cirk1 = new Cirkel(50, 500, 300);
      cirk1.massa = 50;
      
      // Kleine cirkel
      cirk2 = new Cirkel(50, 200, 367.5);
      cirk2.snelheid = new Vector(5, 0);
      cirk2.massa = 50;
      
      // Voeg cirkels toe
      wereld.nieuwVoorwerp(cirk1);
      wereld.nieuwVoorwerp(cirk2);
      
      wereld.teken();
      
      /*
        GUI
      */
      
      // Automatisch afspelen
      $loopBtn.click(function(){
        // Als er al een interval bestaat moet je pauzeren
        if(interval){
          // Maak de volgendeknop weer klikbaar
          $stapBtn.removeAttr("disabled");
          
          // Maak de pauzeknop een startknop
          $loopBtn.text('Start');
          
          // Haal het interval weg
          clearInterval(interval);
          interval = null;
        }
        
        // Anders moet je er een maken
        else {
          // Volgendeknop even disabelen
          $stapBtn.attr("disabled", "disabled");
          
          // Maak de startknop een pauzeknop
          $loopBtn.text('Stop');
          
          // Nieuw interval met ongeveer 60fps
          interval = setInterval(function(){
            loop(true);
          }, 1000 / 60);
        }
        
        return false;
      });
      
      // Ga heen, en lope voorwaartsch
      $stapBtn.click(function(){
        if(!interval){
          loop(true);
        }
        return false;
      });
      
      $nieuwBtn.click(function(){
        // Random cirkel
        var cirkel = new Cirkel(Math.randInt(5, 30), Math.randInt(50, 750), Math.randInt(50, 550));
        
        var hoek = Math.random()*2*Math.PI;
        var vdx = Math.cos(hoek);
        var vdy = Math.sin(hoek);
        
        cirkel.snelheid = new Vector(vdx, vdy);
        cirkel.massa = 10;
        wereld.nieuwVoorwerp(cirkel);
        
        wereld.teken();
        
        return false;
      });
      
      $('#menubar1, #menubar2').submit(function(){ return false; });
      
      $('#showOptions').toggle(function(){
        $(this).addClass('uitgeklapt');
        $("#opties").show();
      }, function(){
        $(this).removeClass('uitgeklapt');
        $("#opties").hide();
      });
      
      $('#krachten').change(function(){
        Wereld.TEKENKRACHTEN = !Wereld.TEKENKRACHTEN;
        if(!interval) wereld.teken();
      });
      
      $('#snelheid').change(function(){
        Wereld.TEKENSNELHEID = !Wereld.TEKENSNELHEID;
        if(!interval) wereld.teken();
      });
    });
  </script>
</head>
<body>
  <div id="wrap">
    <form action="#" method="get" id="menubar1" class="options top clearfix">
      <h1 class="left">Voorbeeld 1</h1>
      <p class="right">
        <button id="showOptions" class="buttonLarge button-gray">Opties</button>
      </p>
      <div id="opties">
        <p><label><input type="checkbox" name="krachten" id="krachten" checked="checked" />Krachtsvectoren laten zien</label></p>
        <p><label><input type="checkbox" name="snelheid" id="snelheid" checked="checked" />Snelheidsvectoren laten zien</label></p>
      </div>
    </form>
    
    <canvas id="c" width="798" height="600"></canvas>
    
    <form action="#" method="get" id="menubar2" class="options bottom clearfix">
      <p class="left">
        <button id="loop" class="buttonLarge button-gray">Start</button> 
        <button id="stap" class="buttonLarge button-gray">&gt;</button>
      </p>
      <p class="right">
        <button id="add" class="buttonLarge button-gray">Nieuw voorwerp</button>
      </p>
    </form>
  </div>
</body>
</html>